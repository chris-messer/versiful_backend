import pytest

def test_lambdas():
    event = {'resource': '/sms', 'path': '/sms', 'httpMethod': 'POST', 'headers': {'Accept': '*/*', 'CloudFront-Forwarded-Proto': 'https', 'CloudFront-Is-Desktop-Viewer': 'true', 'CloudFront-Is-Mobile-Viewer': 'false', 'CloudFront-Is-SmartTV-Viewer': 'false', 'CloudFront-Is-Tablet-Viewer': 'false', 'CloudFront-Viewer-ASN': '14618', 'CloudFront-Viewer-Country': 'US', 'Content-Type': 'application/x-www-form-urlencoded', 'Host': 'fsu5q1gafe.execute-api.us-east-1.amazonaws.com', 'I-Twilio-Idempotency-Token': 'd22703f9-25a3-42d9-9a79-4f4b2830c8fe', 'User-Agent': 'TwilioProxy/1.1', 'Via': '1.1 48b970169016f7185b7cff9e185ee0b2.cloudfront.net (CloudFront)', 'X-Amz-Cf-Id': 'J787Rk5KPr0LCQ8IdhrifZ_YVgOEdXp7-aM8zAzQSHxDfLSTKNS1LA==', 'X-Amzn-Trace-Id': 'Root=1-679b9d54-11dad0475b0ded4c46e5461f', 'X-Forwarded-For': '100.24.35.52, 130.176.137.83', 'X-Forwarded-Port': '443', 'X-Forwarded-Proto': 'https', 'X-Home-Region': 'us1', 'X-Twilio-Signature': 'luFY79GmaArZodwEYbmpus00I4U='}, 'multiValueHeaders': {'Accept': ['*/*'], 'CloudFront-Forwarded-Proto': ['https'], 'CloudFront-Is-Desktop-Viewer': ['true'], 'CloudFront-Is-Mobile-Viewer': ['false'], 'CloudFront-Is-SmartTV-Viewer': ['false'], 'CloudFront-Is-Tablet-Viewer': ['false'], 'CloudFront-Viewer-ASN': ['14618'], 'CloudFront-Viewer-Country': ['US'], 'Content-Type': ['application/x-www-form-urlencoded'], 'Host': ['fsu5q1gafe.execute-api.us-east-1.amazonaws.com'], 'I-Twilio-Idempotency-Token': ['d22703f9-25a3-42d9-9a79-4f4b2830c8fe'], 'User-Agent': ['TwilioProxy/1.1'], 'Via': ['1.1 48b970169016f7185b7cff9e185ee0b2.cloudfront.net (CloudFront)'], 'X-Amz-Cf-Id': ['J787Rk5KPr0LCQ8IdhrifZ_YVgOEdXp7-aM8zAzQSHxDfLSTKNS1LA=='], 'X-Amzn-Trace-Id': ['Root=1-679b9d54-11dad0475b0ded4c46e5461f'], 'X-Forwarded-For': ['100.24.35.52, 130.176.137.83'], 'X-Forwarded-Port': ['443'], 'X-Forwarded-Proto': ['https'], 'X-Home-Region': ['us1'], 'X-Twilio-Signature': ['luFY79GmaArZodwEYbmpus00I4U=']}, 'queryStringParameters': None, 'multiValueQueryStringParameters': None, 'pathParameters': None, 'stageVariables': None, 'requestContext': {'resourceId': 'ep18c1', 'resourcePath': '/sms', 'httpMethod': 'POST', 'extendedRequestId': 'FNWFUEmLoAMEEvw=', 'requestTime': '30/Jan/2025:15:40:04 +0000', 'path': '/dev/sms', 'accountId': '018908982481', 'protocol': 'HTTP/1.1', 'stage': 'dev', 'domainPrefix': 'fsu5q1gafe', 'requestTimeEpoch': 1738251604875, 'requestId': '126d351a-7c0f-4f1a-bee4-864d7b06337f', 'identity': {'cognitoIdentityPoolId': None, 'accountId': None, 'cognitoIdentityId': None, 'caller': None, 'sourceIp': '100.24.35.52', 'principalOrgId': None, 'accessKey': None, 'cognitoAuthenticationType': None, 'cognitoAuthenticationProvider': None, 'userArn': None, 'userAgent': 'TwilioProxy/1.1', 'user': None}, 'domainName': 'fsu5q1gafe.execute-api.us-east-1.amazonaws.com', 'deploymentId': 'jupr8m', 'apiId': 'fsu5q1gafe'}, 'body': 'ToCountry=US&ToState=&SmsMessageSid=SMc6690ec2f140d88c88b31565bc97f82d&NumMedia=0&ToCity=&FromZip=76105&SmsSid=SMc6690ec2f140d88c88b31565bc97f82d&FromState=TX&SmsStatus=received&FromCity=FORT+WORTH&Body=I+hate+my+parents&FromCountry=US&To=%2B18336811158&ToZip=&NumSegments=1&MessageSid=SMc6690ec2f140d88c88b31565bc97f82d&AccountSid=ACa17422cc94c4406b05b38735571b7dee&From=%2B18179956114&ApiVersion=2010-04-01', 'isBase64Encoded': False}
    event = {'version': '1.0', 'resource': '/sms', 'path': '/sms', 'httpMethod': 'POST', 'headers': {'Content-Length': '420', 'Content-Type': 'application/x-www-form-urlencoded', 'Host': 'dev.api.versiful.io', 'I-Twilio-Idempotency-Token': 'd3f0295d-dc0f-4735-a8c4-5394b60add0b', 'User-Agent': 'TwilioProxy/1.1', 'X-Amzn-Trace-Id': 'Root=1-679d3e33-035286ec41ce2bdc1ce943fc', 'X-Forwarded-For': '54.242.4.226', 'X-Forwarded-Port': '443', 'X-Forwarded-Proto': 'https', 'X-Home-Region': 'us1', 'X-Twilio-Signature': 'NJvjcDhRVkKDbAv7Q0XMYNHBoAA=', 'accept': '*/*'}, 'multiValueHeaders': {'Content-Length': ['420'], 'Content-Type': ['application/x-www-form-urlencoded'], 'Host': ['dev.api.versiful.io'], 'I-Twilio-Idempotency-Token': ['d3f0295d-dc0f-4735-a8c4-5394b60add0b'], 'User-Agent': ['TwilioProxy/1.1'], 'X-Amzn-Trace-Id': ['Root=1-679d3e33-035286ec41ce2bdc1ce943fc'], 'X-Forwarded-For': ['54.242.4.226'], 'X-Forwarded-Port': ['443'], 'X-Forwarded-Proto': ['https'], 'X-Home-Region': ['us1'], 'X-Twilio-Signature': ['NJvjcDhRVkKDbAv7Q0XMYNHBoAA='], 'accept': ['*/*']}, 'queryStringParameters': None, 'multiValueQueryStringParameters': None, 'requestContext': {'accountId': '018908982481', 'apiId': 'w65varg202', 'domainName': 'dev.api.versiful.io', 'domainPrefix': 'dev', 'extendedRequestId': 'FRaoLhgIoAMESpQ=', 'httpMethod': 'POST', 'identity': {'accessKey': None, 'accountId': None, 'caller': None, 'cognitoAmr': None, 'cognitoAuthenticationProvider': None, 'cognitoAuthenticationType': None, 'cognitoIdentityId': None, 'cognitoIdentityPoolId': None, 'principalOrgId': None, 'sourceIp': '54.242.4.226', 'user': None, 'userAgent': 'TwilioProxy/1.1', 'userArn': None}, 'path': '/dev/sms', 'protocol': 'HTTP/1.1', 'requestId': 'FRaoLhgIoAMESpQ=', 'requestTime': '31/Jan/2025:21:18:43 +0000', 'requestTimeEpoch': 1738358323949, 'resourceId': 'ANY /sms', 'resourcePath': '/sms', 'stage': 'dev'}, 'pathParameters': None, 'stageVariables': None, 'body': 'VG9Db3VudHJ5PVVTJlRvU3RhdGU9JlNtc01lc3NhZ2VTaWQ9U000Njg3MjI0YjFjZGEwMzQ3ZDBlMGE4NzlkNTFlZGNiYyZOdW1NZWRpYT0wJlRvQ2l0eT0mRnJvbVppcD03NjEwNSZTbXNTaWQ9U000Njg3MjI0YjFjZGEwMzQ3ZDBlMGE4NzlkNTFlZGNiYyZGcm9tU3RhdGU9VFgmU21zU3RhdHVzPXJlY2VpdmVkJkZyb21DaXR5PUZPUlQrV09SVEgmQm9keT1JK2FtK3N0cnVnZ2xpbmcrd2l0aCtteStmYWl0aCZGcm9tQ291bnRyeT1VUyZUbz0lMkIxODMzNjgxMTE1OCZUb1ppcD0mTnVtU2VnbWVudHM9MSZNZXNzYWdlU2lkPVNNNDY4NzIyNGIxY2RhMDM0N2QwZTBhODc5ZDUxZWRjYmMmQWNjb3VudFNpZD1BQ2ExNzQyMmNjOTRjNDQwNmIwNWIzODczNTU3MWI3ZGVlJkZyb209JTJCMTgxNzk5NTYxMTQmQXBpVmVyc2lvbj0yMDEwLTA0LTAx', 'isBase64Encoded': True}
    context = ''

    from lambdas.sms.sms_handler import handler
    t = handler(event, context)
    assert True

def test_users():
    event =
    context = ''

    from lambdas.users.users_handler import handler
    t = handler(event, context)
    assert True

def test_auth():
    event = {'version': '1.0', 'resource': '/auth/{proxy+}', 'path': '/auth/callback', 'httpMethod': 'POST', 'headers': {'Content-Length': '94', 'Content-Type': 'application/json', 'Host': 'api.dev.versiful.io', 'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36', 'X-Amzn-Trace-Id': 'Root=1-67b73f07-5a876e9422543fa570b442e6', 'X-Forwarded-For': '134.238.163.206', 'X-Forwarded-Port': '443', 'X-Forwarded-Proto': 'https', 'accept': '*/*', 'accept-encoding': 'gzip, deflate, br, zstd', 'accept-language': 'en-US,en;q=0.9', 'origin': 'http://localhost:5173', 'priority': 'u=1, i', 'referer': 'http://localhost:5173/', 'sec-ch-ua': '"Not(A:Brand";v="99", "Google Chrome";v="133", "Chromium";v="133"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"', 'sec-fetch-dest': 'empty', 'sec-fetch-mode': 'cors', 'sec-fetch-site': 'cross-site', 'sec-fetch-storage-access': 'active'}, 'multiValueHeaders': {'Content-Length': ['94'], 'Content-Type': ['application/json'], 'Host': ['api.dev.versiful.io'], 'User-Agent': ['Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36'], 'X-Amzn-Trace-Id': ['Root=1-67b73f07-5a876e9422543fa570b442e6'], 'X-Forwarded-For': ['134.238.163.206'], 'X-Forwarded-Port': ['443'], 'X-Forwarded-Proto': ['https'], 'accept': ['*/*'], 'accept-encoding': ['gzip, deflate, br, zstd'], 'accept-language': ['en-US,en;q=0.9'], 'origin': ['http://localhost:5173'], 'priority': ['u=1, i'], 'referer': ['http://localhost:5173/'], 'sec-ch-ua': ['"Not(A:Brand";v="99", "Google Chrome";v="133", "Chromium";v="133"'], 'sec-ch-ua-mobile': ['?0'], 'sec-ch-ua-platform': ['"macOS"'], 'sec-fetch-dest': ['empty'], 'sec-fetch-mode': ['cors'], 'sec-fetch-site': ['cross-site'], 'sec-fetch-storage-access': ['active']}, 'queryStringParameters': None, 'multiValueQueryStringParameters': None, 'requestContext': {'accountId': '018908982481', 'apiId': 'w65varg202', 'domainName': 'api.dev.versiful.io', 'domainPrefix': 'api', 'extendedRequestId': 'GSbJPjafIAMEMQw=', 'httpMethod': 'POST', 'identity': {'accessKey': None, 'accountId': None, 'caller': None, 'cognitoAmr': None, 'cognitoAuthenticationProvider': None, 'cognitoAuthenticationType': None, 'cognitoIdentityId': None, 'cognitoIdentityPoolId': None, 'principalOrgId': None, 'sourceIp': '134.238.163.206', 'user': None, 'userAgent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36', 'userArn': None}, 'path': '/dev/auth/callback', 'protocol': 'HTTP/1.1', 'requestId': 'GSbJPjafIAMEMQw=', 'requestTime': '20/Feb/2025:14:41:11 +0000', 'requestTimeEpoch': 1740062471508, 'resourceId': 'ANY /auth/{proxy+}', 'resourcePath': '/auth/{proxy+}', 'stage': 'dev'}, 'pathParameters': {'proxy': 'callback'}, 'stageVariables': None, 'body': '{"code":"f99a6174-d054-4727-a099-287799da99bb","redirectUri":"http://localhost:5173/callback"}', 'isBase64Encoded': False}
    context = ''
    from lambdas.auth.auth_handler import handler
    t = handler(event, context)


def test_jwt_auth():
    event =
    context = ''
    from lambdas.authorizer.jwt_authorizer import handler
    t = handler(event, context)

